<!DOCTYPE HTML>
<div id="html">
    <head>
        <title>Playing around with Web Audio API</title>
    </head>
    <body>
        <h1>Let the music play!</h1>

        <audio id="audio" controls>
            <source src="DOt_-_05_-_IMF.mp3" type="audio/mpeg">
        </audio>

        <script>
            var audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            var audioElement = document.querySelector('audio');
            var source = audioCtx.createMediaElementSource(audioElement);

            var analyser = audioCtx.createAnalyser();
            source.connect(analyser);
            analyser.fftSize = 32;
            var bufferLength = analyser.frequencyBinCount;

            setInterval(() =>{
                var dataArray = new Uint8Array(bufferLength);
                analyser.getByteFrequencyData(dataArray);
                console.log(dataArray);
            }, 1000);

            analyser.connect(audioCtx.destination);
        </script>
    </body>
</div>
